# SPDX-FileCopyrightText: 2021 Helmholtz Centre for Environmental Research (UFZ)
# SPDX-FileCopyrightText: 2021 Helmholtz-Zentrum Dresden-Rossendorf (HZDR)
#
# SPDX-License-Identifier: Apache-2.0

---
# This is an example playbook to execute Ansible tests.

- name: Verify
  hosts: all
  gather_facts: true
  vars:
    netplan_ethernets:
      - interface_name: 'eth0'
        dhcp4: 'no'
        gateway4: '10.1.0.1'
        addresses:
          - '10.1.0.10/24'
        nameservers:
          addresses:
            - '8.8.8.8'
            - '9.9.9.9'
  tasks:
    - name: Check ip addresses
      assert:
        that:
          - hostvars[inventory_hostname]['ansible_eth0']['ipv4']['address'] | ansible.netcommon.ipaddr('address') | ansible.netcommon.ipaddr('bool')
          - netplan_ethernets[0]['addresses'][0] | ansible.netcommon.ipaddr('address') | ansible.netcommon.ipaddr('bool')

...
